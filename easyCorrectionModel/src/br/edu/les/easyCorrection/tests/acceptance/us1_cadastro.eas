#--------------------------------------------------------------------------------------------
# Teste de Aceitaçãoo do sistema easyLabCorrection
# Equipe de Desenvolvimento:
# ----- Alysson Milanez
# ----- Augusto Macedo
# ----- Demetrio Mestre
#--------------------------------------------------------------------------------------------

#####################################################################################
# Caso de Uso 1: Controle de Acesso: 
# Funcionalidade que permite o GRUD de menus, funções, grupos e usuários no sistema.
#####################################################################################

#Limpar os registors do banco de dados
limpaBanco

expect "[]" listarMenus
expect "[]" listarFuncoes
expect "[]" listarGrupos
expect "[]" listarUsuarios

#####################################################################################
# testes de setup: temos um controle de acesso adequado? menus, funções, grupos e 
# usuários.
#####################################################################################

# ------- Setup de Menus -----------
#gravar e ler
menu1=cadastrarMenu nome="Controle de Acesso" rotulo="acesso" 
expect ${menu1} getMenu id=${menu1}
expectError "Menu nao foi encontrado(a)." getMenu id=999
 
menus=echo "["${menu1}"]"
expect ${menus} listarMenus
expect "Controle de Acesso" getAtributoMenu id=${menu1} nomeAtributo="nome"
expect "acesso" getAtributoMenu id=${menu1} nomeAtributo="rotulo"


menu2=cadastrarMenu nome="Avaliação" rotulo="avaliacao"
expectDifferent ${menu1} echo ${menu2}

menu3=cadastrarMenu nome="Configurações" rotulo=
expect "Configurações" getAtributoMenu id=${menu3} nomeAtributo="nome"
expect "null" getAtributoMenu id=${menu3} nomeAtributo="rotulo"

expectError "Atributo \"naoExiste\" nao existe." getAtributomenu id=${menu3} nomeAtributo="naoExiste"
menuAuxiliar=cadastrarMenu nome="qualquer" rotulo=

menus=echo "["${menu1}"," ${menu2}"," ${menu3}"," ${menuAuxiliar}"]"
expect ${menus} listarMenus

expectError "O campo \"nome\" nao pode ser vazio." cadastrarMenu nome="" rotulo="qualquer"
expectError "O campo \"nome\" nao pode ser vazio." cadastrarMenu nome="  " rotulo="qualquer"
expectError "O campo \"nome\" nao pode ser vazio." cadastrarMenu nome="" rotulo="qualquer"