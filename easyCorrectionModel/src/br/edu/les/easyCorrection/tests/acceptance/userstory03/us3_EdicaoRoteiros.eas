#--------------------------------------------------------------------------------------------
# Teste de Aceitacao do sistema easyLabCorrection
# Equipe de Desenvolvimento:
# ----- Alysson Filgueira
# ----- Augusto Macedo
# ----- Demetrio Mestre
#--------------------------------------------------------------------------------------------

#####################################################################################
# US 03: Edição de Roteiros
#####################################################################################

# Setup de um Roteiro Base para as edições
idRoteiro1=cadastrarRoteiro periodoId=1 nome="Roteiro1" descricao= dataLiberacao="+7_DIAS" dataFinalEntrega= \
dataFinalDiscussao= numeroMaximoEnvios=-1 penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 \
numeroMaximoParticipantes=-1 bloqueado=false

######### Edições que podem ser também criações (essas funcionalidades foram parcialmente testadas na criação)

#ID do Teste: a
expectError "Nome da atividade inválido. O Roteiro não pôde ser atualizado!" \
editarRoteiro roteiroId=${idRoteiro1} periodoId=1 nome= descricao= dataLiberacao="+7_DIAS" dataFinalEntrega= dataFinalDiscussao= \
numeroMaximoEnvios=-1 penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface= \
diretorioTestes= numeroMaximoParticipantes=-1 bloqueado=false

#ID do Teste: b
expectError "Data de Liberação inválida. O roteiro não pôde ser ser atualizado!" \
editarRoteiro roteiroId=${idRoteiro1} periodoId=1 nome="Roteiro b" descricao= \
dataLiberacao="" dataFinalEntrega="" dataFinalDiscussao="" numeroMaximoEnvios=-1 penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 \
tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=-1 bloqueado=false

#ID do Teste: c
idRoteiro1=editarRoteiro roteiroId=${idRoteiro1} periodoId=1 nome="Roteiro c" descricao= dataLiberacao="+7_DIAS" dataFinalEntrega="" dataFinalDiscussao="" \
numeroMaximoEnvios=-1 penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1   \
diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=-1 bloqueado=false

#ID do Teste: d
expectError "Data Limite para Entrega anterior à Data de Liberação. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+14_DIAS" dataFinalEntrega="+7_DIAS" dataFinalDiscussao="" numeroMaximoEnvios=-1 \
penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=-1 bloqueado=false

#ID do Teste: e
expectError "Data Limite para Discussão anterior à Data Limite para Entrega. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+21_DIAS" dataFinalDiscussao="+14_DIAS" numeroMaximoEnvios=-1 \
penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=-1 bloqueado=false

#ID do Teste: f
expectError "O número máximo de integrantes deve ser sempre maior ou igual a 1 integrante. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=-1 \
penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=-1000 bloqueado=false

#ID do Teste: g
expectError "O número máximo de envios deve ser sempre maior ou igual a 1. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=0 \
penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: h
expectError "A Penalidade por dia de atraso deve ser sempre maior ou igual a 0,0 e menor ou igual a 10,0. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=15 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: i
expectError "A Porcentagem automática da avaliação deve ser sempre >= 0 e <= 100. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=150 tempoLimiteTestes=-1 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: j
expectError "Time-limit de execução dos testes por método inválido, deve ser sempre > 0 quando a Porcentagem Automática de Avaliação for > 0 e <= 100. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=-1000 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: k
expectError "Se a Porcentagem Automática da Avaliação é 0, o Time-limit dos testes por método deve ser também 0. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao="" dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=0 tempoLimiteTestes=10 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: l
idRoteiro2=editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao="" dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="" diretorioTestes="" numeroMaximoParticipantes=3 bloqueado=false


######### Funcionalidades unicamente de edição

#ID do Teste: m
expectError "Hierarquia de Diretórios de Testes Automáticos diferente do default: '/periodo<periodo>/testes/roteiroID_<numero>/'. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="" \
diretorioTestes="TESTES_DIFF_DEFAULT" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: n
idRoteiro3=editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="" \
diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false
 
#ID do Teste: o
expectError "Hierarquia de Diretórios da Interface diferente do default: '/periodo<periodo>/interface/roteiroID_<numero>/'. O Roteiro não pôde ser atualizado!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="INTERFACE_DIFF_DEFAULT" \
diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: p
idRoteiro4=editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="INTERFACE_DEFAULT_OK" diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: q
idRoteiro5=editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao=null dataLiberacao="+7_DIAS" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="INTERFACE_DEFAULT_OK" \
diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false

#ID do Teste: r
# Editamos a data do roteiro para o dia atual (AGORA) e liberamos o roteiro

idRoteiro1=editarRoteiro roteiroId=${idRoteiro1} periodoId=1 nome="Roteiro1" descricao= dataLiberacao="AGORA" dataFinalEntrega= dataFinalDiscussao= \
numeroMaximoEnvios=-1 penalidadeDiasAtraso=-1 porcentagemTestesAutomaticos=-1 tempoLimiteTestes=-1 diretorioInterface= \
diretorioTestes= numeroMaximoParticipantes=-1 bloqueado=false

#Mudar para a data de hoje
expectError "O Roteiro Roteiro1 não pôde ser liberado devido a falhas em sua especificação!" liberarRoteiro idRoteiro=${idRoteiro1}

#ID do Teste: s
# Editamos um roteiro para ser liberado hoje mesmo

idRoteiro2=editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro2" descricao= dataLiberacao="AGORA" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="INTERFACE_DEFAULT_OK" \
diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false

#Mudar para a data de hoje
idRoteiro3=liberarRoteiro idRoteiro=${idRoteiro2}

#ID do Teste: t 

# Bloqueamos um roteiro no estado LIBERADO (idRoteiro3)
idRoteiro3=bloquearRoteiro idRoteiro=${idRoteiro3}

# Criamos um novo roteiro (estado CRIADO) e bloqueamos
idRoteiro4=editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro4" descricao= dataLiberacao="AGORA" dataFinalEntrega="+14_DIAS" dataFinalDiscussao="+21_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="INTERFACE_DEFAULT_OK" \
diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false

idRoteiro4=bloquearRoteiro idRoteiro=${idRoteiro4}


#ID do Teste: u
# Desbloqueamos um roteiro bloqueado anteriormente (idRoteiro3)
idRoteiro5=desbloquearRoteiro idRoteiro=${idRoteiro4}

#ID do Teste: v

expectError "Não é possível editar um Roteiro após a data de entrega do mesmo!" editarRoteiro roteiroId=${idRoteiro1} \
periodoId=1 nome="Roteiro5" descricao= dataLiberacao="-21_DIAS" dataFinalEntrega="-14_DIAS" dataFinalDiscussao="-7_DIAS" numeroMaximoEnvios=3 \
penalidadeDiasAtraso=0.5 porcentagemTestesAutomaticos=50 tempoLimiteTestes=1000 diretorioInterface="INTERFACE_DEFAULT_OK" \
diretorioTestes="TESTES_DEFAULT_OK" numeroMaximoParticipantes=3 bloqueado=false


#####################################################################################
# Para ver as alteracoes no Banco de Dados comente as linhas seguintes.
#####################################################################################

#excluirRoteiro idRoteiro=${idRoteiro1}
#excluirRoteiro idRoteiro=${idRoteiro2}
#excluirRoteiro idRoteiro=${idRoteiro3}
#excluirRoteiro idRoteiro=${idRoteiro4}
#excluirRoteiro idRoteiro=${idRoteiro5}